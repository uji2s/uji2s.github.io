<!DOCTYPE html>
<html lang="no">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Shots Teller</title>
<style>
body{
    font-family: Arial, sans-serif;
    background:#222;
    color:#fff;
    text-align:center;
    margin:0;
    padding:10px;
}

.container{
    max-width: 600px;
    margin:auto;
    padding:10px;
}

h1{
    font-size:2em;
    margin-bottom:20px;
    color:#fff;
}

#counter{
    font-size:6rem;
    font-weight:bold;
    margin:40px 0;
    cursor:pointer;
    user-select:none;
    color:#fff;
}

#counter:hover{
    color:#ccc;
}

.buttons{
    display:flex;
    justify-content:center;
    gap:15px;
    margin-bottom:20px;
}

.buttons button{
    padding:10px 20px;
    font-size:1.2rem;
    border:none;
    border-radius:8px;
    cursor:pointer;
    font-weight:bold;
    transition:0.2s;
}

#minusBtn{background:#888;color:#fff;}
#minusBtn:hover{background:#aaa;}

#manualBtn{background:#555;color:#fff;}
#manualBtn:hover{background:#777;}

#resetBtn{background:#f5f5f5;color:#111;}
#resetBtn:hover{background:#fff;}

#history{
    margin-top:30px;
    max-width:600px;
    margin-left:auto;
    margin-right:auto;
}

#history h2{
    margin-bottom:10px;
    color:#fff;
}

#history ul{
    list-style:none;
    padding:0;
    max-height:400px;
    overflow-y:auto;
}

#history li{
    background:#333;
    margin:5px 0;
    padding:8px 12px;
    border-radius:6px;
    display:flex;
    justify-content:space-between;
    color:#ccc;
}

#history li span.date{
    color:#999;
    font-size:0.85rem;
}
</style>
</head>
<body>
<div class="container">
    <h1>Shots Teller</h1>
    <div id="counter">0</div>

    <div class="buttons">
        <button id="minusBtn">-1</button>
        <button id="manualBtn">Fyll inn manuelt</button>
        <button id="resetBtn">Reset</button>
    </div>

    <div id="history">
        <h2>Historikk</h2>
        <ul id="historyList"></ul>
    </div>
</div>

<script>
let shots = 0;
let history = [];

// --- Load data ---
const storedShots = localStorage.getItem('shots_counter');
const storedHistory = localStorage.getItem('shots_history');
if(storedShots) shots = parseInt(storedShots) || 0;
if(storedHistory) history = JSON.parse(storedHistory) || [];

const counterEl = document.getElementById('counter');
const historyListEl = document.getElementById('historyList');

function updateCounter(){
    counterEl.textContent = shots;
    localStorage.setItem('shots_counter', shots);
}

function renderHistory(){
    historyListEl.innerHTML='';
    history.slice().reverse().forEach(item=>{
        const li = document.createElement('li');
        li.textContent = `${item.count} shots`;
        const dateSpan = document.createElement('span');
        dateSpan.className='date';
        dateSpan.textContent = new Date(item.date).toLocaleString();
        li.appendChild(dateSpan);
        historyListEl.appendChild(li);
    });
}

// --- Add shot ---
function addShot(){
    shots++;
    updateCounter();
    history.push({count:shots, date: new Date()});
    localStorage.setItem('shots_history', JSON.stringify(history));
    renderHistory();
}

// --- Remove shot ---
function removeShot(){
    if(shots>0) shots--;
    updateCounter();
    renderHistory();
}

// --- Manual input ---
function manualInput(){
    const val = prompt('Hvor mange shots har du tatt?');
    const num = parseInt(val);
    if(!isNaN(num) && num>=0){
        shots = num;
        updateCounter();
        history.push({count:shots, date:new Date()});
        localStorage.setItem('shots_history', JSON.stringify(history));
        renderHistory();
    }
}

// --- Reset ---
function resetCounter(){
    if(confirm('Vil du nullstille telleren?')){
        shots = 0;
        history = [];
        updateCounter();
        localStorage.removeItem('shots_counter');
        localStorage.removeItem('shots_history');
        renderHistory();
    }
}

// --- Event listeners ---
counterEl.addEventListener('click', addShot);
document.getElementById('minusBtn').addEventListener('click', removeShot);
document.getElementById('manualBtn').addEventListener('click', manualInput);
document.getElementById('resetBtn').addEventListener('click', resetCounter);

// --- Init ---
updateCounter();
renderHistory();
</script>
</body>
</html>
