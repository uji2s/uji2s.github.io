<!DOCTYPE html>
<html lang="no">
<head>
    <meta charset="utf-8">
    <title>Skækkulator — THC-kakao</title>
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 780px;
            margin: 10px auto;
            background: #fbfbfb;
            padding: 18px;
            border-radius: 12px;
            box-shadow: 0 6px 20px rgba(0,0,0,0.06);
        }

        h1 {
            text-align: center;
            margin-bottom: 4px;
            font-size: 22px;
        }

        p.lead {
            text-align: center;
            color: #444;
            margin-top: 0;
            margin-bottom: 12px;
            font-size: 14px;
        }

        label {
            display: block;
            margin-top: 12px;
            font-weight: 600;
            color: #222;
        }

        input, select {
            margin-top: 6px;
            width: 100%;
            padding: 8px 10px;
            border-radius: 6px;
            border: 1px solid #ddd;
            font-size: 14px;
            box-sizing: border-box;
        }

        .row {
            display: flex;
            gap: 12px;
            flex-wrap: wrap;
        }

        .col {
            flex: 1;
            min-width: 140px;
        }

        .checkbox-inline {
            margin-top: 10px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            gap: 8px;
        }

        button {
            margin-top: 16px;
            padding: 12px;
            width: 100%;
            font-size: 16px;
            border-radius: 8px;
            border: 0;
            background: #2b9aef;
            color: #fff;
            cursor: pointer;
        }

        #warn {
            background: #fff7e6;
            border: 1px solid #ffd08a;
            padding: 10px;
            border-radius: 8px;
            margin-bottom: 10px;
            color: #7a4b00;
            display: none;
        }

        #result {
            margin-top: 18px;
            padding: 12px;
            border-radius: 8px;
            background: #fff;
            border: 1px solid #eee;
        }

        .note {
            font-size: 13px;
            color: #555;
            margin-top: 8px;
        }

        small {
            color: #666;
            display: block;
            margin-top: 6px;
        }

        @media screen and (max-width: 480px) {
            .row {
                flex-direction: column;
            }
        }
    </style>
</head>
<body>
    <h1>Skækkulator — THC-kakao</h1>
    <p class="lead">THC per kopp med fett-justering, dose-varsel og koselige vibber 🌿☕</p>

    <label>Gram hasj:</label>
    <input id="grams" type="number" min="0" step="0.1" value="1">

    <label>Styrke på hasj:</label>
    <select id="strength">
        <option value="0.10">Svak (~10 %)</option>
        <option value="0.15">Middels (~15 %)</option>
        <option value="0.20">Sterk (~20 %)</option>
        <option value="0.25">Ekstra sterk (~25 %)</option>
        <option value="0">Ukjent (bruk 15 %)</option>
    </select>

    <div class="row">
        <div class="col">
            <label>Konsistens:</label>
            <select id="consistency">
                <option value="0.9">Kief (svært fint, lav løselighet)</option>
                <option value="0.95">Fast</option>
                <option value="1.0">Hard</option>
                <option value="1.05">Myk</option>
                <option value="1.08">Seig</option>
                <option value="1.1">Klumpete / smuldrete</option>
            </select>
        </div>
        <div class="col">
            <label>Farge:</label>
            <select id="color">
                <option value="0.92">Veldig lys</option>
                <option value="0.96">Lys</option>
                <option value="1.04">Mørk</option>
                <option value="1.08">Veldig mørk</option>
            </select>
        </div>
    </div>

    <div class="checkbox-inline">
        <label for="oily" style="margin:0;">Oljete?</label>
        <input id="oily" type="checkbox">
    </div>

    <div class="row">
        <div class="col">
            <label>Melketype (fett %):</label>
            <select id="milk">
                <option value="0.005">Ekstra lett (0.5 %)</option>
                <option value="0.01">Lett (1 %)</option>
                <option value="0.035">Helmelk (3.5 %)</option>
            </select>
            <small>Mer fett gir bedre oppløsning av THC i fettfasen.</small>
        </div>
        <div class="col">
            <label>Sjokopålegg fett %:</label>
            <select id="chocoFat">
                <option value="0.309">Nutella (30.9 %)</option>
                <option value="0.365">First Price (36.5 %)</option>
            </select>
        </div>
    </div>

    <div class="checkbox-inline">
        <label style="margin:0;">Sjokosmør?</label>
        <input id="useChocoButter" type="checkbox" checked>
    </div>

    <label>Antall kopper:</label>
    <input id="cups" type="number" min="1" step="1" value="1">

    <button onclick="calculateTHC()">Regn THC per kopp</button>

    <div id="result">
        <div id="warn"></div>
        <div id="out"></div>
    </div>

    <script>
        function chooseQuote(effect) {
            const normal = [
                "Bare koselig og chill ☕😌", "Du vil føle det, men alt er smooth 😎",
                "Perfekt balanse mellom chill og flyt 🌿", "Sett på litt musikk, kos deg 🎶",
                "En kopp med ren ro 🧘‍♂️"];
            const serdarsk = [
                "Jeg koser chill ass, alt soft nå 🤙", "Skogtun Tangen vibes, bror 🌲✨",
                "Hold fast ass – dette blir tur!", "Bror, jeg tror jeg ser lyden nå 💀"];
            const adriansk = [
                "🌿 Me molto relaxino", "😌 Me senti soft vibra",
                "🌌 Woah me trippi stilo", "🍫 Me gusta kakaolino"];

            const weedJokes = [
                "Why did the stoner plant a light bulb? He wanted to grow a power plant.",
                "Why was the stoner staring at the orange juice?<br>Because it said concentrate.",
                "How do stoners clean their teeth?<br>With a joint brush.",
                "Why did the pothead cross the road?<br>To get to the other high.",
                "What do you call a stoner with two spliffs?<br>A high achiever.",
                "Why don't stoners play hide and seek?<br>Because good luck hiding when you're giggling.",
                "How does a stoner fix a broken bong?<br>With a joint effort.",
                "Why did the stoner sit on the clock?<br>He wanted to be on time.",
                "What’s a stoner’s favorite type of music?<br>High-hop.",
                "Why did the stoner bring a ladder to the party?<br>Because he heard the drinks were on the house.",
                "How do you know a stoner’s at your door?<br>They forget why they came.",
                "Why did the stoner go to the doctor?<br>He was feeling a little baked.",
                "What do you call a stoner’s dog?<br>A baked beagle.",
                "Why did the stoner go to space?<br>To find higher ground.",
                "What’s a stoner’s favorite website?<br>Reddit.",
                "How do stoners throw a party?<br>They roll with it.",
                "Why did the stoner fail his math test?<br>He was too high to count.",
                "What do stoners call a slow computer?<br>High-lag.",
                "Why did the stoner stare at the frozen juice?<br>Because it was concentrate.",
                "Why did the stoner eat the clock?<br>He wanted to get high on time.",
                "How do you know a stoner is knocking at your door?<br>He forgot why he was there.",
                "Why did the stoner bring a pillow to the party?<br>Because he wanted to get couch-locked.",
                "What’s a stoner’s favorite salad?<br>Ca-nabis.",
                "Why do stoners make terrible secret agents?<br>They keep getting caught in a puff.",
                "How does a stoner stay cool in the summer?<br>He takes a chill pill.",
                "What do you call a stoner with a map?<br>Lost.",
                "Why was the stoner happy in math class?<br>He was on a higher plane.",
                "What do stoners put on their toast?<br>High-jam.",
                "Why did the stoner buy a boat?<br>He wanted to go high seas.",
                "Why did the stoner fail art class?<br>He was too spaced out.",
                "How do stoners pay for things?<br>They blaze a trail.",
                "Why did the stoner go to the bakery?<br>He wanted some baked goods.",
                "What did the stoner say at the beach?<br>Sea, sea, seaweed.",
                "Why did the stoner go to the bank?<br>To check his high-interest account.",
                "How do stoners communicate?<br>By joint messaging.",
                "Why did the stoner stare at the fridge?<br>He was looking for some chill.",
                "Why don’t stoners make good chefs?<br>They get baked instead of baking.",
                "What did the stoner say to the tree?<br>Leaf me alone, I'm high.",
                "Why did the stoner take a nap in the garden?<br>He wanted to get some fresh high air.",
                "What’s a stoner’s favorite candy?<br>High-chews.",
                "Why was the stoner so calm?<br>Because he was in his high mind.",
                "How do stoners navigate?<br>They follow the high road.",
                "Why did the stoner break up with his lighter?<br>He felt burnt out.",
                "What did the stoner say about the chair?<br>It’s so chair-mazing, I’m sitting on it forever.",
                "Why did the stoner bring string to the party?<br>To tie one on.",
                "What’s a stoner’s favorite exercise?<br>Joint stretches.",
                "Why did the stoner go to school?<br>To get a higher education.",
                "Why did the stoner sit in the sun?<br>He wanted to get a little baked.",
                "What do you call a stoner in a movie theater?<br>High definition."
            ];

            const r = Math.random();
            let pool = normal;
            if (r < 0.33) { pool = Math.random() < 0.5 ? serdarsk : adriansk; }
            const quoteText = pool[Math.floor(Math.random() * pool.length)];
            const jokeText = weedJokes[Math.floor(Math.random() * weedJokes.length)];

            return `${quoteText}<br>💡 ${jokeText}`;
        }

        function calculateTHC() {
            const grams = parseFloat(document.getElementById('grams').value) || 0;
            let strength = parseFloat(document.getElementById('strength').value) || 0.15;
            const consistency = parseFloat(document.getElementById('consistency').value) || 1;
            const color = parseFloat(document.getElementById('color').value) || 1;
            const oily = document.getElementById('oily').checked;
            const milkFat = parseFloat(document.getElementById('milk').value) || 0.01;
            let chocoFat = parseFloat(document.getElementById('chocoFat').value) || 0.3;
            const useChocoButter = document.getElementById('useChocoButter').checked;
            const cups = Math.max(1, parseInt(document.getElementById('cups').value) || 1);

            const totalTHC_raw = grams * strength * 1000;
            let solubility = consistency * color * (oily ? 1.1 : 1); // oljete gir +10 %
            let fatScore = milkFat * 100 * 0.6;
            fatScore += (chocoFat * 100) * (useChocoButter ? 0.9 : 0.45);
            const fatMultiplier = 0.55 + (fatScore / 100);
            const totalTHC_available = totalTHC_raw * solubility * fatMultiplier;
            const thcPerCup = totalTHC_available / cups;
            const percentOfRaw = (thcPerCup / totalTHC_raw) * 100;

            let effect = '';
            if (thcPerCup < 10) effect = 'Mild';
            else if (thcPerCup < 30) effect = 'Middels';
            else if (thcPerCup < 60) effect = 'Sterk';
            else effect = 'Ekstrem';

            const warnEl = document.getElementById('warn');
            if (thcPerCup > 50) {
                warnEl.style.display = 'block';
                warnEl.innerHTML = '⚠️ Høy dose – ta det rolig og kos deg. Ha snacks klare 🍫🍿.';
            } else warnEl.style.display = 'none';

            let extra = 3;
            if (fatMultiplier < 0.9) extra += 3;
            else if (fatMultiplier < 1.1) extra += 1;
            else extra -= 0.5;
            extra += Math.max(0, (cups - 1) * 0.6);
            if (extra < 0.5) extra = 0.5;

            const quote = chooseQuote(effect);
            document.getElementById('out').innerHTML =
                `<strong>THC per kopp:</strong> ${thcPerCup.toFixed(1)} mg ` +
                `<small>(${percentOfRaw.toFixed(1)} % av rå-THC)</small><br>` +
                `<strong>Effekt:</strong> ${effect}<br>` +
                `<strong>Anbefalt ekstra varighet:</strong> ca ${extra.toFixed(1)} min for fett-infusjon.<br>` +
                `<div style="margin-top:8px;"><em>${quote}</em></div>`;

            document.getElementById('metaSources').innerText = ''; // fjernet kilder
        }
    </script>

</body>
</html>
